<h1><%= @user.email %>'s Profile</h1>

<hr>

<section>
  <h2>Created Events</h2>
  <% if @created_events.any? %>
    <ul>
      <% @created_events.each do |event| %>
        <li>
          <strong><%= link_to event.title, event_path(event) %></strong><br>
          <em><%= event.event_date.strftime("%B %d, %Y at %I:%M %p") %></em><br>
          Location: <%= event.event_location %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>This user hasn't created any events yet.</p>
  <% end %>
</section>

<hr>

<section>
  <h2>Attended Events</h2>

  <h3>Upcoming Events</h3>
  <% upcoming_events = @user.attended_events.select { |event| event.date > Time.current } %>
  <% if upcoming_events.any? %>
    <ul>
      <% upcoming_events.each do |event| %>
        <li>
          <%= link_to event.title, event_path(event) %> —
          <%= event.event_date.strftime("%B %d, %Y at %I:%M %p") %> at <%= event.event_location %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>No upcoming events.</p>
  <% end %>

  <h3>Past Events</h3>
  <% past_events = @user.attended_events.select { |event| event.date <= Time.current } %>
  <% if past_events.any? %>
    <ul>
      <% past_events.each do |event| %>
        <li>
          <%= link_to event.title, event_path(event) %> —
          <%= event.event_date.strftime("%B %d, %Y at %I:%M %p") %> at <%= event.event_location %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>No past events.</p>
  <% end %>
</section>
